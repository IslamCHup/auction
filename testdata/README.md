# Тестовые данные для Postman

## Структура

Этот каталог содержит тестовые данные для проверки всех эндпойнтов микросервисов.

## Файлы

- **postman_collection.json** - Полная коллекция Postman со всеми запросами
- **test_data.md** - Примеры данных для тестирования
- **environment.json** - Окружение для Postman с переменными

## Как использовать

### Импорт коллекции в Postman

1. Откройте Postman
2. Нажмите `Import` в левом меню
3. Выберите файл `postman_collection.json`
4. Коллекция будет импортирована со всеми запросами

### Установка переменных окружения

1. В Postman нажмите на иконку окружения (слева внизу)
2. Импортируйте `environment.json`
3. Активируйте окружение перед запуском тестов

## Порядок тестирования

### 1. Auth endpoints
- Сначала зарегистрируйте пользователя (Role: "buyer")
- Затем зарегистрируйте продавца (Role: "seller")
- Выполните login и скопируйте JWT token в переменную `jwt_token`

### 2. Wallet endpoints
- Используйте X-User-Id заголовок для указания пользователя
- Сначала положите деньги (Deposit)
- Затем заморозьте средства (Freeze)
- Разморозьте средства (Unfreeze) если необходимо

### 3. Lots (Auction) endpoints
- Создайте лот от продавца
- Получите список всех лотов
- Фильтруйте лоты по статусу и цене
- Получите детали конкретного лота

### 4. Bids endpoints
- Создайте ставку на лот
- Получите информацию о ставке
- Получите все ставки для лота
- Получите все ставки пользователя

## Важные переменные

| Переменная | Значение | Примечание |
|-----------|---------|-----------|
| jwt_token | Bearer token | Установите после login |
| user_id | 1, 2, etc | ID пользователя |
| lot_id | 1, 2, etc | ID лота |
| bid_id | 1, 2, etc | ID ставки |

## API Endpoints

### Gateway (Port 8080)
- `POST /api/auth/register` - Регистрация
- `POST /api/auth/login` - Вход
- `GET /api/auth/me` - Текущий пользователь
- `PUT /api/auth/me` - Обновить профиль
- `GET /api/wallet` - Получить кошелек
- `POST /api/wallet/deposit` - Положить деньги
- `POST /api/wallet/freeze` - Заморозить средства
- `POST /api/wallet/unfreeze` - Разморозить средства

### Auction Service (Port 8081)
- `POST /api/lots` - Создать лот
- `GET /api/lots` - Получить лоты (с фильтрами и пагинацией)
- `GET /api/lots/{id}` - Получить лот по ID
- `PUT /api/lots/{id}` - Обновить лот
- `DELETE /api/lots/{id}` - Удалить лот
- `POST /api/lots/{id}/bids` - Создать ставку
- `GET /api/bids/{id}` - Получить ставку по ID
- `GET /api/lots/{id}/bids` - Получить ставки лота
- `GET /api/users/{id}/bids` - Получить ставки пользователя

## Примеры статусов лотов

- `draft` - Черновик
- `active` - Активный
- `completed` - Завершенный

## Примеры ролей пользователей

- `buyer` - Покупатель
- `seller` - Продавец
- `admin` - Администратор
